/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
/*
 * Copyright 2018-present Open Networking Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { Injectable } from '@angular/core';
import { FnService } from '../util/fn.service';
import { LogService } from '../log.service';
import * as d3 from 'd3';
import * as i0 from "@angular/core";
import * as i1 from "../util/fn.service";
import * as i2 from "../log.service";
// --- Ordinal scales for 7 values.
// TODO: migrate these colors to the theme service.
// Colors per Mojo-Design's color palette.. (version one)
//               blue       red        dk grey    steel      lt blue    lt red     lt grey
// var lightNorm = ['#5b99d2', '#d05a55', '#716b6b', '#7e9aa8', '#66cef6', '#db7773', '#aeada8' ],
//     lightMute = ['#a8cceb', '#f1a7a7', '#b9b5b5', '#bdcdd5', '#a8e9fd', '#f8c9c9', '#d7d6d4' ],
// Colors per Mojo-Design's color palette.. (version two)
//               blue       lt blue    red        green      brown      teal       lime
/** @type {?} */
var lightNorm = ['#5b99d2', '#66cef6', '#d05a55', '#0f9d58', '#ba7941', '#3dc0bf', '#56af00'];
/** @type {?} */
var lightMute = ['#9ebedf', '#abdef5', '#d79a96', '#7cbe99', '#cdab8d', '#96d5d5', '#a0c96d'];
/** @type {?} */
var darkNorm = ['#5b99d2', '#66cef6', '#d05a55', '#0f9d58', '#ba7941', '#3dc0bf', '#56af00'];
/** @type {?} */
var darkMute = ['#9ebedf', '#abdef5', '#d79a96', '#7cbe99', '#cdab8d', '#96d5d5', '#a0c96d'];
/** @type {?} */
var colors = {
    light: {
        norm: d3.scaleOrdinal().range(lightNorm),
        mute: d3.scaleOrdinal().range(lightMute),
    },
    dark: {
        norm: d3.scaleOrdinal().range(darkNorm),
        mute: d3.scaleOrdinal().range(darkMute),
    },
};
/**
 * ONOS GUI -- SVG -- Util Service
 *
 * The SVG Util Service provides a miscellany of utility functions.
 */
var SvgUtilService = /** @class */ (function () {
    function SvgUtilService(fs, log) {
        this.fs = fs;
        this.log = log;
        this.log.debug('SvgUtilService constructed');
    }
    /**
     * @param {?} x
     * @param {?=} y
     * @return {?}
     */
    SvgUtilService.prototype.translate = /**
     * @param {?} x
     * @param {?=} y
     * @return {?}
     */
    function (x, y) {
        if (this.fs.isA(x) && x.length === 2 && !y) {
            return 'translate(' + x[0] + ',' + x[1] + ')';
        }
        return 'translate(' + x + ',' + y + ')';
    };
    /**
     * @param {?} x
     * @param {?} y
     * @return {?}
     */
    SvgUtilService.prototype.scale = /**
     * @param {?} x
     * @param {?} y
     * @return {?}
     */
    function (x, y) {
        return 'scale(' + x + ',' + y + ')';
    };
    /**
     * @param {?} x
     * @return {?}
     */
    SvgUtilService.prototype.skewX = /**
     * @param {?} x
     * @return {?}
     */
    function (x) {
        return 'skewX(' + x + ')';
    };
    /**
     * @param {?} deg
     * @return {?}
     */
    SvgUtilService.prototype.rotate = /**
     * @param {?} deg
     * @return {?}
     */
    function (deg) {
        return 'rotate(' + deg + ')';
    };
    /**
     * @return {?}
     */
    SvgUtilService.prototype.cat7 = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var tcid = 'd3utilTestCard';
        /**
         * @param {?} id
         * @param {?} muted
         * @param {?} theme
         * @return {?}
         */
        function getColor(id, muted, theme) {
            // NOTE: since we are lazily assigning domain ids, we need to
            //       get the color from all 4 scales, to keep the domains
            //       in sync.
            /** @type {?} */
            var ln = colors.light.norm(id);
            /** @type {?} */
            var lm = colors.light.mute(id);
            /** @type {?} */
            var dn = colors.dark.norm(id);
            /** @type {?} */
            var dm = colors.dark.mute(id);
            if (theme === 'dark') {
                return muted ? dm : dn;
            }
            else {
                return muted ? lm : ln;
            }
        }
        /**
         * @param {?} svg
         * @return {?}
         */
        function testCard(svg) {
            /** @type {?} */
            var g = svg.select('g#' + tcid);
            /** @type {?} */
            var dom = d3.range(7);
            /** @type {?} */
            var k;
            /** @type {?} */
            var muted;
            /** @type {?} */
            var theme;
            /** @type {?} */
            var what;
            if (!g.empty()) {
                g.remove();
            }
            else {
                g = svg.append('g')
                    .attr('id', tcid)
                    .attr('transform', 'scale(4)translate(20,20)');
                for (k = 0; k < 4; k++) {
                    muted = k % 2;
                    what = muted ? ' muted' : ' normal';
                    theme = k < 2 ? 'light' : 'dark';
                    dom.forEach(function (id, i) {
                        /** @type {?} */
                        var x = i * 20;
                        /** @type {?} */
                        var y = k * 20;
                        g.append('circle')
                            .attr('cx', x)
                            .attr('cy', y)
                            .attr('r', 5)
                            .attr('fill', getColor(id, muted, theme));
                    });
                    g.append('rect')
                        .attr('x', 140)
                        .attr('y', k * 20 - 5)
                        .attr('width', 32)
                        .attr('height', 10)
                        .attr('rx', 2)
                        .attr('fill', '#888');
                    g.append('text').text(theme + what)
                        .attr('x', 142)
                        .attr('y', k * 20 + 2)
                        .attr('fill', 'white');
                    // .style('font-size', '4pt');
                }
            }
        }
        return {
            testCard: testCard,
            getColor: getColor,
        };
    };
    SvgUtilService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root',
                },] },
    ];
    /** @nocollapse */
    SvgUtilService.ctorParameters = function () { return [
        { type: FnService },
        { type: LogService }
    ]; };
    /** @nocollapse */ SvgUtilService.ngInjectableDef = i0.defineInjectable({ factory: function SvgUtilService_Factory() { return new SvgUtilService(i0.inject(i1.FnService), i0.inject(i2.LogService)); }, token: SvgUtilService, providedIn: "root" });
    return SvgUtilService;
}());
export { SvgUtilService };
if (false) {
    /** @type {?} */
    SvgUtilService.prototype.fs;
    /** @type {?} */
    SvgUtilService.prototype.log;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3ZndXRpbC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vZ3VpMi1mdy1saWIvIiwic291cmNlcyI6WyJsaWIvc3ZnL3N2Z3V0aWwuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBZUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDL0MsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzVDLE9BQU8sS0FBSyxFQUFFLE1BQU0sSUFBSSxDQUFDOzs7Ozs7Ozs7Ozs7O0lBYW5CLFNBQVMsR0FBYSxDQUFDLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsQ0FBQzs7SUFDbkcsU0FBUyxHQUFhLENBQUMsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxDQUFDOztJQUVuRyxRQUFRLEdBQWEsQ0FBQyxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLENBQUM7O0lBQ2xHLFFBQVEsR0FBYSxDQUFDLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsQ0FBQzs7SUFFbEcsTUFBTSxHQUFHO0lBQ1gsS0FBSyxFQUFFO1FBQ0gsSUFBSSxFQUFFLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDO1FBQ3hDLElBQUksRUFBRSxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQztLQUMzQztJQUNELElBQUksRUFBRTtRQUNGLElBQUksRUFBRSxFQUFFLENBQUMsWUFB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QUFJLENBQUM7eUJBQzlCLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDO3lCQUNkLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7eUJBQ3JCLElBQUksQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7b0JBQ3ZCLDhCQUE4QjtpQkFDckM7YUFDSjtRQUNMLENBQUM7UUFFRCxPQUFPO1lBQ0gsUUFBUSxFQUFFLFFBQVE7WUFDbEIsUUFBUSxFQUFFLFFBQVE7U0FDckIsQ0FBQztJQUNOLENBQUM7O2dCQXJHSixVQUFVLFNBQUM7b0JBQ1IsVUFBVSxFQUFFLE1BQU07aUJBQ3JCOzs7O2dCQXZDUSxTQUFTO2dCQUNULFVBQVU7Ozt5QkFqQm5CO0NBNEpDLEFBdkdELElBdUdDO1NBcEdZLGNBQWM7OztJQUduQiw0QkFBcUI7O0lBQ3JCLDZCQUF1QiIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgMjAxOC1wcmVzZW50IE9wZW4gTmV0d29ya2luZyBGb3VuZGF0aW9uXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGblNlcnZpY2UgfSBmcm9tICcuLi91dGlsL2ZuLnNlcnZpY2UnO1xuaW1wb3J0IHsgTG9nU2VydmljZSB9IGZyb20gJy4uL2xvZy5zZXJ2aWNlJztcbmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcblxuXG4vLyAtLS0gT3JkaW5hbCBzY2FsZXMgZm9yIDcgdmFsdWVzLlxuLy8gVE9ETzogbWlncmF0ZSB0aGVzZSBjb2xvcnMgdG8gdGhlIHRoZW1lIHNlcnZpY2UuXG5cbi8vIENvbG9ycyBwZXIgTW9qby1EZXNpZ24ncyBjb2xvciBwYWxldHRlLi4gKHZlcnNpb24gb25lKVxuLy8gICAgICAgICAgICAgICBibHVlICAgICAgIHJlZCAgICAgICAgZGsgZ3JleSAgICBzdGVlbCAgICAgIGx0IGJsdWUgICAgbHQgcmVkICAgICBsdCBncmV5XG4vLyB2YXIgbGlnaHROb3JtID0gWycjNWI5OWQyJywgJyNkMDVhNTUnLCAnIzcxNmI2YicsICcjN2U5YWE4JywgJyM2NmNlZjYnLCAnI2RiNzc3MycsICcjYWVhZGE4JyBdLFxuLy8gICAgIGxpZ2h0TXV0ZSA9IFsnI2E4Y2NlYicsICcjZjFhN2E3JywgJyNiOWI1YjUnLCAnI2JkY2RkNScsICcjYThlOWZkJywgJyNmOGM5YzknLCAnI2Q3ZDZkNCcgXSxcblxuLy8gQ29sb3JzIHBlciBNb2pvLURlc2lnbidzIGNvbG9yIHBhbGV0dGUuLiAodmVyc2lvbiB0d28pXG4vLyAgICAgICAgICAgICAgIGJsdWUgICAgICAgbHQgYmx1ZSAgICByZWQgICAgICAgIGdyZWVuICAgICAgYnJvd24gICAgICB0ZWFsICAgICAgIGxpbWVcbmNvbnN0IGxpZ2h0Tm9ybTogc3RyaW5nW10gPSBbJyM1Yjk5ZDInLCAnIzY2Y2VmNicsICcjZDA1YTU1JywgJyMwZjlkNTgnLCAnI2JhNzk0MScsICcjM2RjMGJmJywgJyM1NmFmMDAnXTtcbmNvbnN0IGxpZ2h0TXV0ZTogc3RyaW5nW10gPSBbJyM5ZWJlZGYnLCAnI2FiZGVmNScsICcjZDc5YTk2JywgJyM3Y2JlOTknLCAnI2NkYWI4ZCcsICcjOTZkNWQ1JywgJyNhMGM5NmQnXTtcblxuY29uc3QgZGFya05vcm06IHN0cmluZ1tdID0gWycjNWI5OWQyJywgJyM2NmNlZjYnLCAnI2QwNWE1NScsICcjMGY5ZDU4JywgJyNiYTc5NDEnLCAnIzNkYzBiZicsICcjNTZhZjAwJ107XG5jb25zdCBkYXJrTXV0ZTogc3RyaW5nW10gPSBbJyM5ZWJlZGYnLCAnI2FiZGVmNScsICcjZDc5YTk2JywgJyM3Y2JlOTknLCAnI2NkYWI4ZCcsICcjOTZkNWQ1JywgJyNhMGM5NmQnXTtcblxuY29uc3QgY29sb3JzID0ge1xuICAgIGxpZ2h0OiB7XG4gICAgICAgIG5vcm06IGQzLnNjYWxlT3JkaW5hbCgpLnJhbmdlKGxpZ2h0Tm9ybSksXG4gICAgICAgIG11dGU6IGQzLnNjYWxlT3JkaW5hbCgpLnJhbmdlKGxpZ2h0TXV0ZSksXG4gICAgfSxcbiAgICBkYXJrOiB7XG4gICAgICAgIG5vcm06IGQzLnNjYWxlT3JkaW5hbCgpLnJhbmdlKGRhcmtOb3JtKSxcbiAgICAgICAgbXV0ZTogZDMuc2NhbGVPcmRpbmFsKCkucmFuZ2UoZGFya011dGUpLFxuICAgIH0sXG59O1xuXG4vKipcbiAqIE9OT1MgR1VJIC0tIFNWRyAtLSBVdGlsIFNlcnZpY2VcbiAqXG4gKiBUaGUgU1ZHIFV0aWwgU2VydmljZSBwcm92aWRlcyBhIG1pc2NlbGxhbnkgb2YgdXRpbGl0eSBmdW5jdGlvbnMuXG4gKi9cbkBJbmplY3RhYmxlKHtcbiAgICBwcm92aWRlZEluOiAncm9vdCcsXG59KVxuZXhwb3J0IGNsYXNzIFN2Z1V0aWxTZXJ2aWNlIHtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGZzOiBGblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgbG9nOiBMb2dTZXJ2aWNlXG4gICAgKSB7XG5cblxuXG4gICAgICAgIHRoaXMubG9nLmRlYnVnKCdTdmdVdGlsU2VydmljZSBjb25zdHJ1Y3RlZCcpO1xuICAgIH1cblxuICAgIHRyYW5zbGF0ZSh4OiBudW1iZXJbXSwgeT86IGFueSk6IHN0cmluZyB7XG4gICAgICAgIGlmICh0aGlzLmZzLmlzQSh4KSAmJiB4Lmxlbmd0aCA9PT0gMiAmJiAheSkge1xuICAgICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHhbMF0gKyAnLCcgKyB4WzFdICsgJyknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyB4ICsgJywnICsgeSArICcpJztcbiAgICB9XG5cbiAgICBzY2FsZSh4LCB5KSB7XG4gICAgICAgIHJldHVybiAnc2NhbGUoJyArIHggKyAnLCcgKyB5ICsgJyknO1xuICAgIH1cblxuICAgIHNrZXdYKHgpIHtcbiAgICAgICAgcmV0dXJuICdza2V3WCgnICsgeCArICcpJztcbiAgICB9XG5cbiAgICByb3RhdGUoZGVnKSB7XG4gICAgICAgIHJldHVybiAncm90YXRlKCcgKyBkZWcgKyAnKSc7XG4gICAgfVxuXG4gICAgY2F0NygpIHtcbiAgICAgICAgY29uc3QgdGNpZCA9ICdkM3V0aWxUZXN0Q2FyZCc7XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q29sb3IoaWQsIG11dGVkLCB0aGVtZSkge1xuICAgICAgICAgICAgLy8gTk9URTogc2luY2Ugd2UgYXJlIGxhemlseSBhc3NpZ25pbmcgZG9tYWluIGlkcywgd2UgbmVlZCB0b1xuICAgICAgICAgICAgLy8gICAgICAgZ2V0IHRoZSBjb2xvciBmcm9tIGFsbCA0IHNjYWxlcywgdG8ga2VlcCB0aGUgZG9tYWluc1xuICAgICAgICAgICAgLy8gICAgICAgaW4gc3luYy5cbiAgICAgICAgICAgIGNvbnN0IGxuID0gY29sb3JzLmxpZ2h0Lm5vcm0oaWQpO1xuICAgICAgICAgICAgY29uc3QgbG0gPSBjb2xvcnMubGlnaHQubXV0ZShpZCk7XG4gICAgICAgICAgICBjb25zdCBkbiA9IGNvbG9ycy5kYXJrLm5vcm0oaWQpO1xuICAgICAgICAgICAgY29uc3QgZG0gPSBjb2xvcnMuZGFyay5tdXRlKGlkKTtcbiAgICAgICAgICAgIGlmICh0aGVtZSA9PT0gJ2RhcmsnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG11dGVkID8gZG0gOiBkbjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG11dGVkID8gbG0gOiBsbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHRlc3RDYXJkKHN2Zykge1xuICAgICAgICAgICAgbGV0IGcgPSBzdmcuc2VsZWN0KCdnIycgKyB0Y2lkKTtcbiAgICAgICAgICAgIGNvbnN0IGRvbSA9IGQzLnJhbmdlKDcpO1xuICAgICAgICAgICAgbGV0IGs7XG4gICAgICAgICAgICBsZXQgbXV0ZWQ7XG4gICAgICAgICAgICBsZXQgdGhlbWU7XG4gICAgICAgICAgICBsZXQgd2hhdDtcblxuICAgICAgICAgICAgaWYgKCFnLmVtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBnLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGcgPSBzdmcuYXBwZW5kKCdnJylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgdGNpZClcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICdzY2FsZSg0KXRyYW5zbGF0ZSgyMCwyMCknKTtcblxuICAgICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCA0OyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbXV0ZWQgPSBrICUgMjtcbiAgICAgICAgICAgICAgICAgICAgd2hhdCA9IG11dGVkID8gJyBtdXRlZCcgOiAnIG5vcm1hbCc7XG4gICAgICAgICAgICAgICAgICAgIHRoZW1lID0gayA8IDIgPyAnbGlnaHQnIDogJ2RhcmsnO1xuICAgICAgICAgICAgICAgICAgICBkb20uZm9yRWFjaCgoaWQsIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHggPSBpICogMjA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB5ID0gayAqIDIwO1xuICAgICAgICAgICAgICAgICAgICAgICAgZy5hcHBlbmQoJ2NpcmNsZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2N4JywgeClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignY3knLCB5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdyJywgNSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsIGdldENvbG9yKGlkLCBtdXRlZCwgdGhlbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGcuYXBwZW5kKCdyZWN0JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgMTQwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCBrICogMjAgLSA1KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgMzIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgMTApXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigncngnLCAyKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCAnIzg4OCcpO1xuICAgICAgICAgICAgICAgICAgICBnLmFwcGVuZCgndGV4dCcpLnRleHQodGhlbWUgKyB3aGF0KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAxNDIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneScsIGsgKiAyMCArIDIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsICd3aGl0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gLnN0eWxlKCdmb250LXNpemUnLCAnNHB0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRlc3RDYXJkOiB0ZXN0Q2FyZCxcbiAgICAgICAgICAgIGdldENvbG9yOiBnZXRDb2xvcixcbiAgICAgICAgfTtcbiAgICB9XG5cbn1cbiJdfQ==